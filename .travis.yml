 services:
  - docker
  
script:
    # - docker build --target production --tag todo-app:prod .
    # - docker run --env-file ./.env -p 5000:80 todo-app:prod

  - docker build --target test --tag my-test-image .
  - docker run --env-file ./.env my-test-image tests/test_view_model.py
  - docker run --env-file ./.env my-test-image tests/test_integration.py
  - docker run --env-file ./.env my-test-image tests/test_selenium.py

# jobs:
#   include:
#     - stage: "Tests"                
#       name: "Unit Tests"            
#       script: ./test_view_model.py
#       name: "Integration Tests"
#     - script: ./test_integration.py
#       name: "E2E Tests"     
#     - script: ./test_selenium.py
#       stage: deploy
#       script: ./deploy

notifications:
  slack: '<account>:'

    on_success: never # default: change
    on_failure: always # default: always

  email:
    recipients:
      - yomi.olutimehin@yahoo.com
     on_success: never # default: change
     on_failure: always # default: always