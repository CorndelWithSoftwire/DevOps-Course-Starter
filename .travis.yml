env:
  global:
  - secure: frD0XnJmb80aWqMhT5Nj80rgjAfb5LWmMlAblDf+cTOym+djngXNEMKAUGet0wFbjIK3zJl5OL3G/D+ebigBKDKK2PVow81uRvV7OA7xYOPT86LnxOm93AgqNw8GpAwvULWmGCHimfhSbTF6fXHsJv6XQf6vQqZXl7E6SrZnEMTjM5bwSli3Muz1iHIi1D6gO6hiy3xUa4pPgm/p2b6Hq1em5f8ZP+UTfwkf8e8gUn/bitEm0G8MuTLH5rEiVentX+6npHwID8J107uh25ScTXb9OhWc/zbbNbXoPpi09pJsyPTPJZFPuPqJqsbuLX7Da061KYr17+mkl38HPDXTPmNv4npBYAB2qpUvjvRFX0qcLSVf7w6Ru5xGuxKoKFHHmpGcgINhpQUMLPXoCL6fQKeIN9YarTVAl2skmnSp5FHbLh6QVHmI70p1Md6C3ssuPx8Poyfwk1i00B0S5W90qn5B6Fo5HUNWzyn6cmk9kHSsjsUDki7WwSQ20KowtMrrTJCDhhAK0TcQmjfsNEw03Ib86Tpwl/uH82p9RhkJj362YVi81qwZ5nNqi7BMO1PXk7YmHK96onb3woYcGNrnBlD6h042vamfIgCsWuCAJLVM9z9oF7eSDL9+XWCVelactAbXbhR8O0UicdQOJanq/KPKYu6fjgs6BssfYF2Gvhc=
  - secure: m0dT18o88monvyhsymcp5y+tAcJPF886jr7InLjq3ehuAvATyFjbtxCGAHg1pZmNxNCKp7qo0L/M7JCk42yi0hMBz94vPJvUCd4xxdVVuY+OtRe535ahAw5BNznctmiii05yAw/rybpgVaeBf1FFPeZw4S7YMNE8UQ7pCl6fIOnmcQW2w7Y6HQyDFnOffNfgCiKIqkxOXUhhL5LV+UYm+PBUUKN9kIaWbufy5lQVdszF+9vkXLMZHcNnIpG8fN7yUFSU6aBSj7hMhZQ3CXbFuW5vpqec/5679zEhYp3lWRxD1mjImQ+bijWl2yUDLPSjxRCTXrL5VVVYQc2bj3TuldoxJzkTbLiZ70tGhb4hryZRaM1eUT1TuNmAYZZmhyATExBZaHYUc/3UeAbZ+SWSR3d6qJ3N5vku4C9RgUslgbVAEq0yceGa3DAKGIJgTCuH5999zuCpeAntQ1KaCRVNQ9BXgEpJTSYw0MtpZGHy+BMfTb/6LTy5vAwLSFgc7KAT5NLtS5qnxrhm5Z3OVUpg1yJpn2tHCN8/Dne4C1sjdm3Fbh1sJY8fCvaf6sGqsxecn5wVvo8f3ZOB6If4KNQXqlcjjGxSRJoDxLGNOZ0RmnvvnmV4XuQ6/FfkoP/ePv9jC3XuBpLzPPgYv05ldJGbi3s4ercowXDBsKeLWwtlkNU=

script:
- docker build --target test -t todo-app:test .
- docker run todo-app:test tests/test_viewmodel.py
- docker run todo-app:test tests/test_integration.py
- docker run -e KEY=$KEY -e TOKEN=$TOKEN -e SECRET_KEY=test todo-app:test