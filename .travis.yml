 services:
  - docker
  
script:
    # - docker build --target production --tag todo-app:prod .
    # - docker run --env-file ./.env -p 5000:80 todo-app:prod

  - docker build --target test --tag my-test-image .
  # - docker run --env-file ./.env my-test-image tests
  - docker run my-test-image tests

# jobs:
#   include:
#     - stage: "Tests"                
#       name: "Unit Tests"            
#       script: ./test_view_model
#       name: "Integration Tests"
#     - script: ./integration-tests
#       name: "E2E Tests"     
#     - script: ./test_selenium
#       stage: deploy
#       script: ./deploy

# notifications:
#   slack: '<account>:<token>'
#     on_success: never 
#     on_failure: always 

#   email:
#     recipients:
#       - yomi.olutimehin@yahoo.com
#     on_success: never 
#     on_failure: always   